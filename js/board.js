// Generated by CoffeeScript 1.4.0
(function() {
  var Board, _ref,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  if ((_ref = window.birdseye) == null) {
    window.birdseye = {};
  }

  Board = (function() {

    function Board(id, name, url, memberships, memberFilter, adminsOnly) {
      var _this = this;
      this.id = id;
      this._filterByAdmin = __bind(this._filterByAdmin, this);

      this._filterByName = __bind(this._filterByName, this);

      this.name = ko.observable(name);
      this.url = ko.observable(url);
      this.totalMembers = ko.observable(memberships.length);
      this.memberships = ko.computed(function() {
        return _this._filterByAdmin(adminsOnly, _this._filterByName(memberFilter, memberships));
      });
    }

    Board.prototype._filterByName = function(memberFilter, memberships) {
      var _this = this;
      if (memberFilter() != null) {
        return memberships.filter(function(m) {
          return m.member().matches(memberFilter());
        });
      } else {
        return memberships;
      }
    };

    Board.prototype._filterByAdmin = function(adminsOnly, memberships) {
      var _this = this;
      if (adminsOnly()) {
        return memberships.filter(function(m) {
          return m.type() === 'admin';
        });
      } else {
        return memberships;
      }
    };

    return Board;

  })();

  window.birdseye.Board = Board;

}).call(this);
